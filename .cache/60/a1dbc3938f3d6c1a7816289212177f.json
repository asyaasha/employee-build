{"id":"../node_modules/@aws-sdk/middleware-content-length/build/index.js","dependencies":[{"name":"/Users/a/Desktop/buildopsTest/package.json","includedInParent":true,"mtime":1588363055010},{"name":"/Users/a/Desktop/buildopsTest/node_modules/@aws-sdk/middleware-content-length/package.json","includedInParent":true,"mtime":1588306092105},{"name":"tslib","loc":{"line":3,"column":22},"parent":"/Users/a/Desktop/buildopsTest/node_modules/@aws-sdk/middleware-content-length/build/index.js","resolved":"/Users/a/Desktop/buildopsTest/node_modules/tslib/tslib.es6.js"},{"name":"@aws-sdk/protocol-http","loc":{"line":4,"column":30},"parent":"/Users/a/Desktop/buildopsTest/node_modules/@aws-sdk/middleware-content-length/build/index.js","resolved":"/Users/a/Desktop/buildopsTest/node_modules/@aws-sdk/protocol-http/build/index.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar protocol_http_1 = require(\"@aws-sdk/protocol-http\");\nvar CONTENT_LENGTH_HEADER = \"content-length\";\nfunction contentLengthMiddleware(bodyLengthChecker) {\n    var _this = this;\n    return function (next) { return function (args) { return tslib_1.__awaiter(_this, void 0, void 0, function () {\n        var request, body, headers, length;\n        var _a;\n        return tslib_1.__generator(this, function (_b) {\n            request = args.request;\n            if (protocol_http_1.HttpRequest.isInstance(request)) {\n                body = request.body, headers = request.headers;\n                if (body &&\n                    Object.keys(headers)\n                        .map(function (str) { return str.toLowerCase(); })\n                        .indexOf(CONTENT_LENGTH_HEADER) === -1) {\n                    length = bodyLengthChecker(body);\n                    if (length !== undefined) {\n                        request.headers = tslib_1.__assign(tslib_1.__assign({}, request.headers), (_a = {}, _a[CONTENT_LENGTH_HEADER] = String(length), _a));\n                    }\n                }\n            }\n            return [2 /*return*/, next(tslib_1.__assign(tslib_1.__assign({}, args), { request: request }))];\n        });\n    }); }; };\n}\nexports.contentLengthMiddleware = contentLengthMiddleware;\nexports.contentLengthMiddlewareOptions = {\n    step: \"build\",\n    tags: [\"SET_CONTENT_LENGTH\", \"CONTENT_LENGTH\"],\n    name: \"contentLengthMiddleware\"\n};\nexports.getContentLengthPlugin = function (options) { return ({\n    applyToStack: function (clientStack) {\n        clientStack.add(contentLengthMiddleware(options.bodyLengthChecker), exports.contentLengthMiddlewareOptions);\n    }\n}); };\n"},"sourceMaps":{"js":{"version":3,"file":"index.js","sourceRoot":"","sources":["../src/index.ts"],"names":[],"mappings":";;;AAUA,wDAAqD;AAErD,IAAM,qBAAqB,GAAG,gBAAgB,CAAC;AAE/C,SAAgB,uBAAuB,CACrC,iBAAuC;IADzC,iBAgCC;IA7BC,OAAO,UACL,IAA+B,IACD,OAAA,UAC9B,IAAgC;;;;YAE5B,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;YAC3B,IAAI,2BAAW,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE;gBAC3B,IAAI,GAAc,OAAO,KAArB,EAAE,OAAO,GAAK,OAAO,QAAZ,CAAa;gBAClC,IACE,IAAI;oBACJ,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;yBACjB,GAAG,CAAC,UAAA,GAAG,IAAI,OAAA,GAAG,CAAC,WAAW,EAAE,EAAjB,CAAiB,CAAC;yBAC7B,OAAO,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC,EACxC;oBACM,MAAM,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC;oBACvC,IAAI,MAAM,KAAK,SAAS,EAAE;wBACxB,OAAO,CAAC,OAAO,yCACV,OAAO,CAAC,OAAO,gBACjB,qBAAqB,IAAG,MAAM,CAAC,MAAM,CAAC,MACxC,CAAC;qBACH;iBACF;aACF;YAED,sBAAO,IAAI,uCACN,IAAI,KACP,OAAO,SAAA,IACP,EAAC;;SACJ,EA1B+B,CA0B/B,CAAC;AACJ,CAAC;AAhCD,0DAgCC;AAEY,QAAA,8BAA8B,GAAwB;IACjE,IAAI,EAAE,OAAO;IACb,IAAI,EAAE,CAAC,oBAAoB,EAAE,gBAAgB,CAAC;IAC9C,IAAI,EAAE,yBAAyB;CAChC,CAAC;AAEW,QAAA,sBAAsB,GAAG,UAAC,OAEtC,IAA0B,OAAA,CAAC;IAC1B,YAAY,EAAE,UAAA,WAAW;QACvB,WAAW,CAAC,GAAG,CACb,uBAAuB,CAAC,OAAO,CAAC,iBAAiB,CAAC,EAClD,sCAA8B,CAC/B,CAAC;IACJ,CAAC;CACF,CAAC,EAPyB,CAOzB,CAAC","sourcesContent":["import {\n  BuildHandler,\n  BuildHandlerArguments,\n  BuildMiddleware,\n  BodyLengthCalculator,\n  MetadataBearer,\n  BuildHandlerOutput,\n  Pluggable,\n  BuildHandlerOptions\n} from \"@aws-sdk/types\";\nimport { HttpRequest } from \"@aws-sdk/protocol-http\";\n\nconst CONTENT_LENGTH_HEADER = \"content-length\";\n\nexport function contentLengthMiddleware(\n  bodyLengthChecker: BodyLengthCalculator\n): BuildMiddleware<any, any> {\n  return <Output extends MetadataBearer>(\n    next: BuildHandler<any, Output>\n  ): BuildHandler<any, Output> => async (\n    args: BuildHandlerArguments<any>\n  ): Promise<BuildHandlerOutput<Output>> => {\n    let request = args.request;\n    if (HttpRequest.isInstance(request)) {\n      const { body, headers } = request;\n      if (\n        body &&\n        Object.keys(headers)\n          .map(str => str.toLowerCase())\n          .indexOf(CONTENT_LENGTH_HEADER) === -1\n      ) {\n        const length = bodyLengthChecker(body);\n        if (length !== undefined) {\n          request.headers = {\n            ...request.headers,\n            [CONTENT_LENGTH_HEADER]: String(length)\n          };\n        }\n      }\n    }\n\n    return next({\n      ...args,\n      request\n    });\n  };\n}\n\nexport const contentLengthMiddlewareOptions: BuildHandlerOptions = {\n  step: \"build\",\n  tags: [\"SET_CONTENT_LENGTH\", \"CONTENT_LENGTH\"],\n  name: \"contentLengthMiddleware\"\n};\n\nexport const getContentLengthPlugin = (options: {\n  bodyLengthChecker: BodyLengthCalculator;\n}): Pluggable<any, any> => ({\n  applyToStack: clientStack => {\n    clientStack.add(\n      contentLengthMiddleware(options.bodyLengthChecker),\n      contentLengthMiddlewareOptions\n    );\n  }\n});\n"]}},"error":null,"hash":"0aa6206c20cdbafcae17184c419f765c","cacheData":{"env":{}}}